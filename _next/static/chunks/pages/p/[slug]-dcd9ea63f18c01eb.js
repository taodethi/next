(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[871],{7553:function(e,t,a){var r;r=function(e){"use strict";var t={name:"vi",weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ s\xe1u_thứ bảy".split("_"),months:"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),weekStart:1,weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),ordinal:function(e){return e},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},relativeTime:{future:"%s tới",past:"%s trước",s:"v\xe0i gi\xe2y",m:"một ph\xfat",mm:"%d ph\xfat",h:"một giờ",hh:"%d giờ",d:"một ng\xe0y",dd:"%d ng\xe0y",M:"một th\xe1ng",MM:"%d th\xe1ng",y:"một năm",yy:"%d năm"}};return(e&&"object"==typeof e&&"default"in e?e:{default:e}).default.locale(t,null,!0),t},e.exports=r(a(7484))},4110:function(e){var t;t=function(){return function(e,t,a){e=e||{};var r=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(e,t,a,n){return r.fromToBase(e,t,a,n)}a.en.relativeTime=n,r.fromToBase=function(t,r,s,l,i){for(var o,c,d,u=s.$locale().relativeTime||n,h=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],g=h.length,m=0;m<g;m+=1){var x=h[m];x.d&&(o=l?a(t).diff(s,x.d,!0):s.diff(t,x.d,!0));var b=(e.rounding||Math.round)(Math.abs(o));if(d=o>0,b<=x.r||!x.r){b<=1&&m>0&&(x=h[m-1]);var p=u[x.l];i&&(b=i(""+b)),c="string"==typeof p?p.replace("%d",b):p(b,r,x.l,d);break}}if(r)return c;var f=d?u.future:u.past;return"function"==typeof f?f(c):f.replace("%s",c)},r.to=function(e,t){return s(e,t,this,!0)},r.from=function(e,t){return s(e,t,this)};var l=function(e){return e.$u?a.utc():a()};r.toNow=function(e){return this.to(l(this),e)},r.fromNow=function(e){return this.from(l(this),e)}}},e.exports=t()},1752:function(e,t,a){e.exports=a(1224)},5603:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/p/[slug]",function(){return a(2191)}])},8864:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return i},noSSR:function(){return l}});let r=a(8754);a(5893),a(7294);let n=r._(a(6016));function s(e){return{default:(null==e?void 0:e.default)||e}}function l(e,t){return delete t.webpack,delete t.modules,e(t)}function i(e,t){let a=n.default,r={loading:e=>{let{error:t,isLoading:a,pastDelay:r}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e});let i=(r={...r,...t}).loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?a({...r,loader:()=>null!=i?i().then(s):Promise.resolve(s(()=>null))}):(delete r.webpack,delete r.modules,l(a,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},572:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});let r=a(8754)._(a(7294)).default.createContext(null)},6016:function(e,t,a){"use strict";/**
@copyright (c) 2017-present James Kyle <me@thejameskyle.com>
 MIT License
 Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:
 The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.
 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE
*/Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h}});let r=a(8754)._(a(7294)),n=a(572),s=[],l=[],i=!1;function o(e){let t=e(),a={loading:!0,loaded:null,error:null};return a.promise=t.then(e=>(a.loading=!1,a.loaded=e,e)).catch(e=>{throw a.loading=!1,a.error=e,e}),a}class c{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function d(e){return function(e,t){let a=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),s=null;function o(){if(!s){let t=new c(e,a);s={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return s.promise()}if(!i){let e=a.webpack?a.webpack():a.modules;e&&l.push(t=>{for(let a of e)if(t.includes(a))return o()})}function d(e,t){!function(){o();let e=r.default.useContext(n.LoadableContext);e&&Array.isArray(a.modules)&&a.modules.forEach(t=>{e(t)})}();let l=r.default.useSyncExternalStore(s.subscribe,s.getCurrentValue,s.getCurrentValue);return r.default.useImperativeHandle(t,()=>({retry:s.retry}),[]),r.default.useMemo(()=>{var t;return l.loading||l.error?r.default.createElement(a.loading,{isLoading:l.loading,pastDelay:l.pastDelay,timedOut:l.timedOut,error:l.error,retry:s.retry}):l.loaded?r.default.createElement((t=l.loaded)&&t.default?t.default:t,e):null},[e,l])}return d.preload=()=>o(),d.displayName="LoadableComponent",r.default.forwardRef(d)}(o,e)}function u(e,t){let a=[];for(;e.length;){let r=e.pop();a.push(r(t))}return Promise.all(a).then(()=>{if(e.length)return u(e,t)})}d.preloadAll=()=>new Promise((e,t)=>{u(s).then(e,t)}),d.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let a=()=>(i=!0,t());u(l,e).then(a,a)})),window.__NEXT_PRELOADREADY=d.preloadReady;let h=d},2191:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eM}});var r=a(5893),n=a(6341),s=a(8481),l=a(142),i=a(1163),o=a(9920),c=a(9008),d=a.n(c),u=a(7294),h=a(9879),g=e=>{let{message:t="Đang tải..."}=e;return(0,r.jsxs)("div",{className:"fixed top-0 left-0 w-full h-full flex flex-col items-center justify-center bg-white bg-opacity-80 dark:bg-gray-900 dark:bg-opacity-80 z-50",children:[(0,r.jsx)(o.J,{iconName:"loader",className:"w-16 h-16 animate-spin text-blue-500 dark:text-blue-400 mb-4"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:t})]})},m=a(8552),x=()=>{let[e,t]=(0,u.useState)("Vui l\xf2ng đợi...");return(0,u.useEffect)(()=>{let e=new URLSearchParams(window.location.hash.slice(1)),a=e.get("access_token"),r=e.get("state");a&&"login"===r?((0,h.M8)(a),window.location.href=m.default.pageAdmin):t("")},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d(),{children:(0,r.jsx)("title",{children:"Đăng nhập - TAODETHI.xyz"})}),e?(0,r.jsx)(g,{message:e}):(0,r.jsx)("div",{className:"flex items-center justify-center w-full min-h-screen bg-gradient-to-r from-blue-400 to-purple-500 page-login",children:(0,r.jsxs)("div",{className:"w-full max-w-md p-8 m-4 bg-white border border-gray-200 rounded-2xl shadow-lg sm:p-10 dark:bg-neutral-800 dark:border-neutral-700 transition-all duration-300 hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("img",{src:(0,l.Vh)("/images/logo.png"),alt:"Logo",className:"mx-auto w-auto h-auto mb-6"}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"ĐĂNG NHẬP HỆ THỐNG"})]}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsxs)("button",{type:"button",onClick:h.jc,className:"flex items-center justify-center w-full gap-3 px-6 py-4 text-base font-semibold text-white bg-blue-600 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-300 disabled:opacity-50 disabled:pointer-events-none dark:bg-blue-500 dark:hover:bg-blue-600",children:[(0,r.jsx)(o.J,{iconName:"google",className:"w-6 h-6"}),"Đăng nhập bằng Google"]})})]})})]})},b=a(8900),p=a(7484),f=a.n(p);class y{async fetchApi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="".concat(this.baseUrl,"/blogs/").concat(this.blogId).concat(e),n={method:t,headers:this.headers,body:a?JSON.stringify(a):null};"DELETE"===t&&delete n.body;try{let e=await fetch(r,n);if(!e.ok){let t=await e.json();throw Error("API request failed: ".concat(t.error.message))}return await e.json()}catch(t){return console.error("Error in API request to ".concat(e,":"),t),{error:t.message}}}constructor(e=(0,h.hP)(),t=(0,h.XJ)()){var a=this;this.getPosts=async e=>{let{status:t="DRAFT",categorys:a=[],limit:r=m.default.maxResults,nextPageToken:n,page:s=1,prevPageToken:l}=e;"ALL"===t&&(t="DRAFT+SOFT_TRASHED+SCHEDULED+LIVE");var i,o,c,d=null==t?void 0:null===(o=t.split("+"))||void 0===o?void 0:null===(i=o.map(e=>"status=".concat(e)))||void 0===i?void 0:i.join("&"),u=null==a?void 0:null===(c=a.map(e=>e))||void 0===c?void 0:c.join(",");let h=n&&s>1?n:"",{items:g=[],nextPageToken:x=null}=await this.fetchApi("/posts".concat(t?"?".concat(d):"","&maxResults=").concat(r,"&").concat(u?"labels=".concat(u):"").concat(h?"&access_token=".concat(h):"","&fetchImages=true&q=Quảng B\xecnh"));return{posts:g.map(this.parseBloggerPost),nextPageToken:x,total:null}},this.parseBloggerPost=e=>{let{id:t,title:a,updated:r,published:n,labels:s=[],url:l,content:i,author:{displayName:o},readerComments:c,status:d,images:u=[]}=e,h=e=>new DOMParser().parseFromString(e,"text/html").body,[g={}]=u,x=(e=>{let t=h(e).querySelector(".config");if(t)try{return JSON.parse(decodeURIComponent(t.getAttribute("data"))||"{}")}catch(e){console.error("Config parsing error:",e.message)}return{}})(i);return{id:t,title:a,published:f()(n).format("YYYY-MM-DDTHH:mm"),updated:f()(r).format("YYYY-MM-DDTHH:mm"),content:(e=>{let t=h(e);return t.querySelectorAll(".config").forEach(e=>e.remove()),t.innerHTML})(i),category:s,link:new URL(l).pathname,cover:(null==x?void 0:x.cover)||(null==g?void 0:g.url)||(e=>{if("media$thumbnail"in e)return e.media$thumbnail.url.replace("s72-c","s750");let t=e.content.match(/<img.+?src="(.+?)"/);return t?t[1]:m.default.coverEmpty})(e),subtitle:(null==x?void 0:x.subtitle)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350,a=h(e);return a.querySelectorAll("script").forEach(e=>e.remove()),a.innerText.substring(0,t).trim()}(i),config:x,keywords:(null==x?void 0:x.keywords)||[],author:o,status:d,readerComments:c}},this.getPost=async e=>{let t=await this.fetchApi("/posts/".concat(e,"?fetchImages=true&view=ADMIN"));return this.parseBloggerPost(t)},this.getByPath=e=>this.fetchApi("/posts/byPath?path=".concat(e)),this.searchPosts=e=>this.fetchApi("/posts/search?q=".concat(encodeURIComponent(e))),this.createPost=async e=>{let t=!e.id,{status:a,...r}=e;if(t){if(delete r.id,"DRAFT"===a)return await this.fetchApi("/posts?isDraft=true","POST",r);let e=await this.fetchApi("/posts","POST",{...r,title:(0,l.aJ)(r.title)});if(e.error)return e;r.id=e.id}return"DRAFT"===a?await this.revertPost(r):"LIVE"===a?await this.publishPost(r):await this.updatePost(r)},this.updatePost=e=>this.fetchApi("/posts/".concat(e.id),"PUT",e),this.deletePost=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?await a.revertPost(e):await a.fetchApi("/posts/".concat(e.id),"DELETE")},this.publishPost=e=>this.fetchApi("/posts/".concat(e.id,"/?publish=true"),"PUT",e),this.revertPost=e=>this.fetchApi("/posts/".concat(e.id,"/?revert=true"),"PUT",e),this.createContent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DRAFT",{keywords:a,subtitle:r,cover:n=m.default.coverDefault,title:s}=e,l=encodeURIComponent(JSON.stringify({keywords:a,subtitle:r,cover:n||m.default.coverDefault})),i='<div class="config" data="'.concat(l,'">').concat(r,'<img src="').concat(n||m.default.coverDefault,'" title="').concat(s,'" class="hidden" style="display: none;"/></div>').concat(e.content);return{id:e.id,title:e.title,content:i,labels:e.category,status:t,published:e.published?f()(e.published).toISOString():f()().toISOString(),readerComments:e.readerComments}},this.getPage=async e=>{let t=await this.fetchApi("/pages/".concat(e,"?view=ADMIN"));return this.parseBloggerPage(t)},this.getPages=async e=>{let{status:t,limit:a=m.default.maxResults,nextPageToken:r}=e;"ALL"===t&&(t="DRAFT+SOFT_TRASHED+LIVE");var n,s,l=null==t?void 0:null===(s=t.split("+"))||void 0===s?void 0:null===(n=s.map(e=>"status=".concat(e)))||void 0===n?void 0:n.join("&");let{items:i=[],total:o,nextPageToken:c}=await this.fetchApi("/pages?".concat(l||"","&maxResults=").concat(a).concat(r?"&pageToken=".concat(r):"","&view=ADMIN"));return{pages:i.map(this.parseBloggerPage),total:o,nextPageToken:c}},this.createPage=async e=>{let t=!e.id,{status:a,labels:r,readerComments:n,...s}=e;if(console.log(t,s,a),t){if(delete s.id,"DRAFT"===a)return await this.fetchApi("/pages?isDraft=true","POST",s);delete s.id;let e=await this.fetchApi("/pages","POST",{...s,title:(0,l.aJ)(s.title)});if(e.error)return e;s.id=e.id}return"DRAFT"===a?await this.revertPage(s):"LIVE"===a?await this.publishPage(s):await this.updatePage(s)},this.updatePage=e=>this.fetchApi("/pages/".concat(e.id),"PUT",e),this.deletePage=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?await a.revertPage(e):await a.fetchApi("/pages/".concat(e.id),"DELETE")},this.revertPage=e=>this.fetchApi("/pages/".concat(e.id,"/?revert=true"),"PUT",e),this.publishPage=e=>this.fetchApi("/pages/".concat(e.id,"/?publish=true"),"PUT",e),this.parseBloggerPage=e=>{let{id:t,title:a,content:r,status:n,published:s,updated:l,author:{displayName:i},url:o}=e,c=e=>new DOMParser().parseFromString(e,"text/html").body,d=(e=>{let t=c(e).querySelector(".config");if(t)try{return JSON.parse(decodeURIComponent(t.getAttribute("data"))||"{}")}catch(e){console.error("Config parsing error:",e.message)}return{}})(r);return{id:t,title:a,status:n,published:f()(s).format("YYYY-MM-DDTHH:mm"),updated:f()(l).format("YYYY-MM-DDTHH:mm"),author:i,content:(e=>{let t=c(e);return t.querySelectorAll(".config").forEach(e=>e.remove()),t.innerHTML})(r),link:new URL(o).pathname,cover:(null==d?void 0:d.cover)||(e=>{if("media$thumbnail"in e)return e.media$thumbnail.url.replace("s72-c","s750");let t=e.content.match(/<img.+?src="(.+?)"/);return t?t[1]:m.default.coverEmpty})(e),subtitle:(null==d?void 0:d.subtitle)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350,a=c(e);return a.querySelectorAll("script").forEach(e=>e.remove()),a.innerText.substring(0,t).trim()}(r),config:d,keywords:(null==d?void 0:d.keywords)||[]}},this.baseUrl="https://www.googleapis.com/blogger/v3",this.blogId=t,this.headers={Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}}let v=(0,u.createContext)(),k=()=>(0,u.useContext)(v),j=e=>{let{children:t}=e,[a,n]=(0,u.useState)({}),[s,l]=(0,u.useState)([]),[i,o]=(0,u.useState)(!0),[c,d]=(0,u.useState)({search:"",page:1,limit:10,categorys:[],status:"LIVE",total:0}),h=new y,[g,m]=(0,u.useState)([]),x=(0,u.useCallback)(async()=>{try{let e=await (0,b.pE)();m(e)}catch(e){console.error("Error fetching categories:",e)}},[]);(0,u.useEffect)(()=>{x()},[x]);let p=(0,u.useCallback)(async()=>{try{if(console.log(c),"LIVE"!==c.status){let{posts:e,total:t,nextPageToken:a}=await h.getPosts(c);console.log(e),d(e=>({...e,total:t,nextPageToken:a})),l(e);return}let e=await (0,b.T6)({maxResults:c.limit,start:(c.page-1)*c.limit+1,q:c.search,label:c.categorys.join("+"),status:"all"!==c.status?c.status:void 0});l(e.posts),d(t=>({...t,total:e.total}))}catch(e){console.error("Error fetching posts:",e)}},[c.limit,c.page,c.search,c.categorys,c.status]),f=async()=>{try{o(!0),await p()}catch(e){console.error("Error fetching data:",e)}finally{o(!1)}};(0,u.useEffect)(()=>{f()},[p]);let k=async(e,t)=>{console.log(e,t),o(!0);let r=()=>a.status===e.status?"UPDATE":e.status;switch(t){case"edit":if(e.id){var s=await h.getPost(e.id);console.log(s),s.error?n({...e,action:t}):n({...s,action:t})}else n({...e,action:t});break;case"submit":o(!0);var s=await h.createPost(h.createContent(e,r()));s.error?console.log(s):(n({}),f());break;case"remove":case"trash":await h.deletePost(h.createContent(e,r()),"trash"===t),n({}),f();break;case"cancel":n({});break;default:n({...e,action:t})}o(!1)};return(0,r.jsx)(v.Provider,{value:{searchParams:c,setSearchParams:d,categories:g,lists:s,loading:i,post:a,handleClickPost:k},children:t})};var w=e=>{let{total:t,lists:a=[],loading:n,limit:s,page:l,onClick:i,onSearch:c,status:d,nextPageToken:h}=e,g=(0,u.useMemo)(()=>[{name:"STT",key:"id"},{name:"Ti\xeau đề",key:"title"},{name:"Trạng th\xe1i",key:"status"},{name:"Ng\xe0y cập nhật",key:"updated"},{name:"Danh mục",key:"category"},{name:"H\xe0nh động",key:"action"}],[]),m=(0,u.useMemo)(()=>{let e=Math.ceil(t/s);return Array.from({length:e},(e,t)=>t+1).map(t=>t<=3||t>e-3||t>=l-1&&t<=l+1?(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>c(e=>({...e,page:t})),className:"px-3 py-1 mx-1 rounded ".concat(l===t?"bg-blue-500 text-white dark:bg-blue-600 dark:text-white":"bg-gray-200 dark:bg-gray-700"),children:t})},t):4===t||t===e-3?(0,r.jsx)("li",{className:"px-3 py-1 mx-1",children:"..."},t):null).filter(Boolean)},[t,s,l,c]),x={LIVE:{title:"Đ\xe3 xuất bản",className:"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100"},DRAFT:{title:"Bản nh\xe1p",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100"},SCHEDULED:{title:"Đ\xe3 l\xean lịch",className:"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-100"},SOFT_TRASHED:{title:"Th\xf9ng r\xe1c",className:"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100"}};return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4 text-gray-600 dark:text-gray-300",children:["Tổng số b\xe0i đăng: ",(0,r.jsx)("span",{className:"font-semibold",children:t||0})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:n?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(o.J,{iconName:"loader",className:"w-10 h-10 animate-spin text-blue-500 dark:text-blue-400"})}):(0,r.jsx)("div",{className:"overflow-x-auto relative",children:(0,r.jsxs)("table",{className:"w-full bg-white shadow-md rounded-lg overflow-hidden dark:bg-gray-800",children:[(0,r.jsx)("thead",{className:"bg-gray-100 sticky top-0 z-10 dark:bg-gray-700",children:(0,r.jsx)("tr",{children:g.map(e=>{let{name:t,key:a}=e;return(0,r.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:t},a)})})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:null==a?void 0:a.map((e,t)=>(0,r.jsxs)("tr",{className:"dark:bg-gray-800",children:[(0,r.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap dark:text-gray-300",children:(l-1)*s+t+1}),(0,r.jsx)("td",{className:"px-4 sm:px-6 py-4 dark:text-white",children:e.title}),(0,r.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"py-1.5 px-3 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(x[e.status].className),children:x[e.status].title})}),(0,r.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap hidden sm:table-cell dark:text-gray-300",children:f()(e.updated).format("HH:mm:ss DD/MM/YYYY")}),(0,r.jsx)("td",{className:"px-4 sm:px-6 py-4 hidden md:table-cell",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.category.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs text-nowrap dark:bg-gray-700 dark:text-gray-300",children:e},e))})}),(0,r.jsxs)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,r.jsxs)("button",{className:"text-blue-600 hover:text-blue-900 mr-3 flex items-center dark:text-blue-400 dark:hover:text-blue-300",onClick:()=>window.open(e.link,"_blank"),children:[(0,r.jsx)(o.J,{iconName:"eye",className:"w-4 h-4 mr-1"}),"Xem"]}),(0,r.jsxs)("button",{className:"text-indigo-600 hover:text-indigo-900 mr-3 flex items-center dark:text-indigo-400 dark:hover:text-indigo-300",onClick:()=>i(e,"edit"),children:[(0,r.jsx)(o.J,{iconName:"edit",className:"w-4 h-4 mr-1"}),"Sửa"]}),(0,r.jsxs)("button",{className:"text-red-600 hover:text-red-900 flex items-center dark:text-red-400 dark:hover:text-red-300",onClick:()=>i(e,"delete"),children:[(0,r.jsx)(o.J,{iconName:"trash",className:"w-4 h-4 mr-1"}),"X\xf3a"]})]})]},e.id))})]})})}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2 dark:text-white",children:"Số b\xe0i viết tr\xean trang:"}),(0,r.jsx)("select",{value:s,onChange:e=>c(t=>({...t,limit:Number(e.target.value),page:1})),className:"border rounded px-2 py-1 dark:bg-gray-700 dark:text-white dark:border-gray-600",children:[5,10,20,50,100].map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsx)("ul",{className:"flex",children:m}),"LIVE"!==d&&(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsx)("button",{onClick:()=>c(e=>({...e,page:e.page+1})),disabled:!h,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:"Trang tiếp"})})]})]})},N=e=>{var t;let a,{onSearch:n,search:s,onClick:l,categorys:i=[],status:c,categories:d}=e,[h,g]=(0,u.useState)(""),[m,x]=(0,u.useState)(s),b=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),p=(0,u.useCallback)((t=e=>{n(t=>({...t,search:e,page:1}))},function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];clearTimeout(a),a=setTimeout(()=>t(...r),300)}),[n]);return(0,u.useEffect)(()=>{p(m)},[m,p]),(0,r.jsxs)(u.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative w-full sm:w-2/3",children:[(0,r.jsx)("input",{type:"text",placeholder:"T\xecm kiếm b\xe0i viết...",className:"w-full border-2 border-gray-300 rounded-full py-2 px-3 pl-12 text-lg focus:outline-none focus:border-blue-500 transition duration-300 ease-in-out dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:focus:border-blue-400",value:m,onChange:e=>x(e.target.value),disabled:"LIVE"!==c}),(0,r.jsx)(o.J,{iconName:"search",className:"absolute left-4 top-3.5 w-6 h-6 text-gray-400 dark:text-gray-300"})]}),(0,r.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full w-full sm:w-auto transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 dark:bg-blue-500 dark:hover:bg-blue-600",onClick:()=>l({status:"LIVE"},"edit"),children:[(0,r.jsx)(o.J,{iconName:"plus",className:"w-5 h-5 mr-2 inline-block"}),"Tạo b\xe0i mới"]})]}),(0,r.jsxs)("div",{className:"mb-6 flex flex-wrap items-start gap-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-1 dark:text-white",children:"Lọc theo danh mục:"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map(e=>(0,r.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1.5 rounded-full text-sm flex items-center transition duration-300 ease-in-out hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800",children:[e,(0,r.jsx)("button",{type:"button",className:"ml-2 text-blue-600 hover:text-blue-800 focus:outline-none dark:text-blue-400 dark:hover:text-blue-300",onClick:()=>n(t=>({...t,categorys:t.categorys.filter(t=>t!==e)})),children:(0,r.jsx)(o.J,{iconName:"x",className:"w-4 h-4"})})]},e))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",className:"w-full py-2 px-2 text-lg bg-white border-2 border-gray-300 rounded-lg shadow-sm transition duration-300 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:focus:border-blue-400 dark:focus:ring-blue-300",placeholder:"T\xecm kiếm danh mục...",value:h,onBlur:()=>setTimeout(()=>g(""),200),onFocus:()=>g(" "),onChange:e=>g(e.target.value)}),d.length>0&&h.length>0&&(0,r.jsx)("ul",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-auto dark:bg-gray-700 dark:border-gray-600",children:d.filter(e=>!i.includes(e)).filter(e=>b(e.toLowerCase()).includes(b(h.toLowerCase().trim()))).map(e=>(0,r.jsx)("li",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer transition duration-300 ease-in-out dark:hover:bg-gray-600",onClick:()=>{g(""),n(t=>({...t,categorys:[...t.categorys,e],page:1}))},children:e},e))})]})]})]}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-3 dark:text-white",children:"Trạng th\xe1i"}),(0,r.jsxs)("select",{value:c,onChange:e=>n(t=>({...t,status:e.target.value,page:1})),className:"w-full border-2 border-gray-300 rounded-lg py-2 px-2 bg-white text-lg focus:outline-none focus:border-blue-500 transition duration-300 ease-in-out dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:focus:border-blue-400",children:[(0,r.jsx)("option",{value:"ALL",children:"Tất cả"}),(0,r.jsx)("option",{value:"LIVE",children:"Đ\xe3 xuất bản"}),(0,r.jsx)("option",{value:"DRAFT",children:"Bản nh\xe1p"}),(0,r.jsx)("option",{value:"SCHEDULED",children:"Đ\xe3 l\xean lịch"}),(0,r.jsx)("option",{value:"SOFT_TRASHED",children:"Th\xf9ng r\xe1c"})]})]})]})]})},C=e=>{let{post:t,onClick:a}=e,n="delete"===t.action;return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300 ease-in-out z-40 ".concat(n?"opacity-100":"opacity-0 pointer-events-none")}),(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 transition-all duration-300 ease-in-out ".concat(n?"opacity-100":"opacity-0 pointer-events-none"),children:(0,r.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full shadow-lg dark:bg-gray-800 transition-all duration-300 ease-in-out transform ".concat(n?"scale-100":"scale-95"),children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(o.J,{iconName:"alertTriangle",className:"mx-auto text-red-500 w-16 h-16 mb-4"}),(0,r.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-800 dark:text-gray-200",children:"X\xe1c nhận x\xf3a b\xe0i viết"}),(0,r.jsx)("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"Bạn c\xf3 chắc chắn muốn x\xf3a b\xe0i viết n\xe0y?"}),(0,r.jsx)("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded mb-4",children:(0,r.jsx)("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:t.title})}),(0,r.jsxs)("div",{className:"flex  gap-2",children:[(0,r.jsx)("button",{onClick:()=>a(t,"remove"),className:"w-full text-white bg-red-600 hover:bg-red-700 font-medium rounded-lg text-sm px-5 py-2.5 transition-colors duration-200",children:"X\xf3a vĩnh viễn"}),(0,r.jsx)("button",{onClick:()=>a(t,"trash"),className:"w-full text-white bg-yellow-600 hover:bg-yellow-700 font-medium rounded-lg text-sm px-5 py-2.5 transition-colors duration-200",children:"Chuyển th\xe0nh bản nh\xe1p"}),(0,r.jsx)("button",{onClick:()=>a(t,"cancel"),className:"w-full text-gray-500 bg-white hover:bg-gray-100 font-medium rounded-lg border border-gray-200 text-sm px-5 py-2.5 transition-colors duration-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600",children:"Hủy"})]})]})})})]})};let T=e=>{let{formData:t,onClick:a,onChange:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 dark:text-white",children:"Xuất bản"}),(0,r.jsxs)("select",{className:"w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:border-blue-500 transition duration-300",name:"status",value:t.status,onChange:n,children:[(0,r.jsx)("option",{value:"DRAFT",children:"Bản nh\xe1p"}),(0,r.jsx)("option",{value:"LIVE",children:"Xuất bản"})]}),(0,r.jsx)("input",{type:"datetime-local",name:"published",value:t.published,onChange:n,className:"w-full mt-4 p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:border-blue-500 transition duration-300"}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300",type:"submit",onClick:()=>a({},"submit"),children:"Đăng"}),(0,r.jsx)("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-6 rounded-lg transition duration-300",type:"button",onClick:()=>a({},"cancel"),children:"Hủy"})]})]})},S=e=>{let{formData:t,onChange:a}=e,[n,s]=(0,u.useState)(!1),i=(0,u.useCallback)(async e=>{let t=e.target.files[0];if(t){s(!0);try{let e=await (0,l.gN)(t);if(!e)throw Error("Kh\xf4ng thể tải l\xean h\xecnh ảnh");a({target:{name:"cover",value:e}})}catch(r){console.error("Error uploading image:",r);let e=new FileReader;e.onload=()=>{a({target:{name:"cover",value:e.result}})},e.readAsDataURL(t)}finally{s(!1)}}},[a]);return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 dark:text-white",children:"Ảnh đại diện"}),(0,r.jsxs)("div",{className:"cursor-pointer relative overflow-hidden rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 group",onClick:()=>!n&&document.getElementById("coverImageUpload").click(),children:[(0,r.jsx)("img",{src:t.cover||m.default.coverEmpty,alt:"Ảnh đại diện",className:"w-full h-auto object-cover transition-transform duration-300 group-hover:scale-105"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:n?(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"}):(0,r.jsx)("span",{className:"text-white text-lg font-bold px-4 py-2 bg-blue-500 rounded-full transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:"Thay đổi ảnh"})})]}),(0,r.jsx)("input",{id:"coverImageUpload",type:"file",name:"cover",onChange:i,className:"hidden",accept:"image/*",disabled:n})]})},E=e=>{let{formData:t,onChange:a}=e,[n,s]=(0,u.useState)(t.subtitle||""),l=(0,u.useRef)(null);return(0,u.useEffect)(()=>{s(t.subtitle||"")},[t.subtitle]),(0,u.useEffect)(()=>()=>{l.current&&clearTimeout(l.current)},[]),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold dark:text-white",children:"M\xf4 tả ngắn"}),(0,r.jsx)("textarea",{name:"subtitle",value:n,onChange:e=>{let t=e.target.value;s(t),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{a({target:{name:"subtitle",value:t}})},300)},rows:3,placeholder:"Nhập m\xf4 tả ngắn b\xe0i viết...",className:"text-justify w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:border-blue-500 transition duration-300"})]})},_=e=>{let{formData:t,onChange:a,categories:n}=e,[s,l]=(0,u.useState)(n),[i,o]=(0,u.useState)(""),c=(0,u.useCallback)(e=>{a({target:{name:"category",value:t.category.includes(e)?t.category.filter(t=>t!==e):[...t.category,e]}})},[t.category,a]),d=(0,u.useCallback)(e=>{if("Enter"===e.key){let e=i.trim();!e||t.category.includes(e)||(a({target:{name:"category",value:[...t.category,e]}}),o(""),s.includes(e)||l(t=>[...t,e]))}},[i,t.category,a,s]);return(0,u.useEffect)(()=>{l(n)},[n]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 dark:text-white",children:"Danh mục"}),(0,r.jsx)("div",{className:"max-h-60 overflow-y-auto mb-4 pr-2 custom-scrollbar",children:s.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-1 hover:bg-gray-100 cursor-pointer py-2 px-1 dark:hover:bg-gray-700 rounded-md",children:[(0,r.jsx)("input",{type:"checkbox",id:e,checked:t.category.includes(e),onChange:()=>c(e),className:"form-checkbox h-5 w-5 text-blue-600 transition duration-150 ease-in-out"}),(0,r.jsx)("label",{htmlFor:e,className:"ml-3 text-sm dark:text-gray-300 cursor-pointer flex-1",children:e})]},e))}),(0,r.jsx)("input",{type:"text",className:"w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:border-blue-500 transition duration-300",placeholder:"Th\xeam danh mục mới",value:i,onChange:e=>o(e.target.value),onKeyDown:d})]})},D=e=>{var t;let{formData:a,onChange:n}=e,[s,l]=(0,u.useState)(""),i=(0,u.useCallback)((e,t)=>{n({target:{name:"keywords",value:t?a.keywords.filter(t=>t!==e):[...new Set([...a.keywords,e])]}})},[a.keywords,n]),o=(0,u.useCallback)(()=>{let e=s.split(",").map(e=>e.trim()).filter(e=>""!==e);n({target:{name:"keywords",value:[...new Set([...a.keywords,...e])]}}),l("")},[s,a.keywords,n]);return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 dark:text-white",children:"Từ kh\xf3a"}),(0,r.jsx)("div",{className:"flex flex-wrap mb-2",children:null===(t=a.keywords)||void 0===t?void 0:t.map(e=>(0,r.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium mr-2 mb-2 px-2.5 py-1 rounded dark:bg-blue-900 dark:text-blue-300",children:[e,(0,r.jsx)("button",{onClick:()=>i(e,!0),className:"ml-2 text-xs",children:"\xd7"})]},e))}),(0,r.jsx)("input",{type:"text",name:"keywords",value:s,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&o(),className:"w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:border-blue-500 transition duration-300",placeholder:"Nhập từ kh\xf3a (mỗi từ c\xe1ch nhau bằng dấu phẩy)"})]})},P=e=>{let{formData:t,onChange:a}=e,n=e=>{a({target:{name:"readerComments",value:e}})};return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 text-gray-800 dark:text-white",children:"C\xe0i đặt b\xecnh luận"}),(0,r.jsx)("div",{className:"space-y-1",children:[{value:"ALLOW",label:"Cho ph\xe9p b\xecnh luận"},{value:"DONT_ALLOW_SHOW_EXISTING",label:"Kh\xf4ng cho ph\xe9p, hiển thị b\xecnh luận hiện c\xf3"},{value:"DONT_ALLOW_HIDE_EXISTING",label:"Kh\xf4ng cho ph\xe9p, ẩn b\xecnh luận hiện c\xf3"}].map(e=>(0,r.jsxs)("label",{className:"flex items-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg transition-all duration-300 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"readerComments",value:e.value,checked:t.readerComments===e.value,onChange:()=>n(e.value),className:"form-radio h-5 w-5 text-blue-600 transition duration-150 ease-in-out"}),(0,r.jsx)("span",{className:" flex-1 ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:e.label})]},e.value))})]})};var A=e=>{let{formData:t,onClick:a,onChange:n,categories:s}=e;return(0,r.jsxs)("div",{className:"md:w-1/4 p-3 bg-gray-50 dark:bg-gray-900 border-r border-gray-300 dark:border-gray-700 flex flex-col gap-4",children:[(0,r.jsx)(T,{formData:t,onClick:a,onChange:n}),(0,r.jsx)(S,{formData:t,onChange:n}),(0,r.jsx)(E,{formData:t,onChange:n}),(0,r.jsx)(_,{formData:t,onChange:n,categories:s}),(0,r.jsx)(D,{formData:t,onChange:n}),(0,r.jsx)(P,{formData:t,onChange:n})]})},I=a(5152),M=a.n(I);let O=M()(()=>Promise.all([a.e(608),a.e(762),a.e(325),a.e(578)]).then(a.bind(a,3578)),{loadableGenerated:{webpack:()=>[3578]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"flex items-center justify-center h-28 w-full",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-solid shadow-lg"})})}),L=e=>{let{formData:t}=e,[a,n]=(0,u.useState)({score:0,suggestions:[]}),[s,l]=(0,u.useState)(!0),i=(0,u.useMemo)(()=>[{condition:e=>e.length>=50&&e.length<=60,score:15,suggestion:e=>"Ti\xeau đề n\xean c\xf3 độ d\xe0i từ 50 đến 60 k\xfd tự. Hiện tại: ".concat(e.length," k\xfd tự.")},{condition:e=>e.replace(/<[^>]*>/g,"").length>=1500,score:15,suggestion:e=>"Nội dung b\xe0i viết n\xean c\xf3 \xedt nhất 1500 k\xfd tự. Hiện tại: ".concat(e.replace(/<[^>]*>/g,"").length," k\xfd tự.")},{condition:e=>e.length>=140&&e.length<=160,score:15,suggestion:e=>"M\xf4 tả SEO n\xean c\xf3 độ d\xe0i từ 140 đến 160 k\xfd tự. Hiện tại: ".concat(e.length," k\xfd tự.")},{condition:e=>(null==e?void 0:e.length)>=3&&(null==e?void 0:e.length)<=5,score:15,suggestion:e=>"N\xean c\xf3 từ 3 đến 5 từ kh\xf3a SEO. Hiện tại: ".concat(null==e?void 0:e.length," từ kh\xf3a.")},{condition:e=>e,score:10,suggestion:()=>"N\xean th\xeam ảnh đại diện cho b\xe0i viết."},{condition:e=>e.length>0&&e.length<=3,score:5,suggestion:()=>"N\xean chọn từ 1 đến 3 danh mục cho b\xe0i viết."},{condition:e=>(null==e?void 0:e.length)>=3&&(null==e?void 0:e.length)<=8,score:5,suggestion:()=>"N\xean th\xeam từ 3 đến 8 thẻ cho b\xe0i viết."},{condition:e=>e.length>=120&&e.length<=160,score:5,suggestion:()=>"N\xean th\xeam tr\xedch đoạn cho b\xe0i viết với độ d\xe0i từ 120 đến 160 k\xfd tự."}],[]),c=(0,u.useCallback)(()=>{let e=[],a=0,{title:r,content:s,link:l,subtitle:i,keywords:o=[]}=t;[{condition:r.length>=50&&r.length<=60,score:15,suggestion:"Ti\xeau đề n\xean c\xf3 độ d\xe0i từ 50 đến 60 k\xfd tự. Hiện tại: ".concat(r.length," k\xfd tự.")},{condition:s.replace(/<[^>]*>/g,"").length>=1500,score:15,suggestion:"Nội dung b\xe0i viết n\xean c\xf3 \xedt nhất 1500 k\xfd tự. Hiện tại: ".concat(s.replace(/<[^>]*>/g,"").length," k\xfd tự.")},{condition:i.length>=140&&i.length<=160,score:15,suggestion:"M\xf4 tả SEO n\xean c\xf3 độ d\xe0i từ 140 đến 160 k\xfd tự. Hiện tại: ".concat(i.length," k\xfd tự.")},{condition:(null==o?void 0:o.length)>=3&&(null==o?void 0:o.length)<=5,score:15,suggestion:"N\xean c\xf3 từ 3 đến 5 từ kh\xf3a SEO. Hiện tại: ".concat(null==o?void 0:o.length," từ kh\xf3a.")},{condition:t.cover,score:10,suggestion:"N\xean th\xeam ảnh đại diện cho b\xe0i viết."},{condition:t.category.length>0&&t.category.length<=3,score:5,suggestion:"N\xean chọn từ 1 đến 3 danh mục cho b\xe0i viết."},{condition:(null==o?void 0:o.length)>=3&&(null==o?void 0:o.length)<=8,score:5,suggestion:"N\xean th\xeam từ 3 đến 8 thẻ cho b\xe0i viết."},{condition:i.length>=120&&i.length<=160,score:5,suggestion:"N\xean th\xeam tr\xedch đoạn cho b\xe0i viết với độ d\xe0i từ 120 đến 160 k\xfd tự."}].forEach(t=>{let{condition:r,score:n,suggestion:s}=t;r?a+=n:e.push(s)});let c=s.match(/<h[1-6].*?>(.*?)<\/h[1-6]>/g)||[],d=c.filter(e=>e.startsWith("<h2")).length,u=c.filter(e=>e.startsWith("<h3")).length;if(d>0&&d<=5?a+=5:e.push("N\xean sử dụng từ 1 đến 5 thẻ H2 để ph\xe2n chia nội dung b\xe0i viết."),u>0?a+=5:e.push("N\xean sử dụng c\xe1c thẻ H3 để ph\xe2n chia c\xe1c phần nhỏ trong nội dung."),c.length>0&&(c.map(e=>e.match(/<h(\d)/)[1]).every((e,t,a)=>0===t||e>=a[t-1])?a+=5:e.push("Cấu tr\xfac heading n\xean theo thứ tự giảm dần (H2 > H3...).")),l){let t=l.split("-").length,r=l.length,n=0;t>=3&&t<=5?n+=5:t>5?n+=3:n+=1,r>=20&&r<=70?n+=5:r>70?n+=3:n+=1,a+=n,n<8&&e.push("Đường dẫn n\xean c\xf3 từ 3 đến 5 từ v\xe0 độ d\xe0i từ 20 đến 70 k\xfd tự. Hiện tại: ".concat(t," từ, ").concat(r," k\xfd tự."))}else e.push("N\xean th\xeam đường dẫn cho b\xe0i viết.");n({score:a,suggestions:e})},[t,i]);(0,u.useEffect)(()=>{c()},[c]);let d=(0,u.useCallback)(()=>a.score>=80?"text-green-500":a.score>=50?"text-yellow-500":"text-red-500",[a.score]);return(0,r.jsxs)("div",{className:"md:w-full p-4 bg-gray-100 dark:bg-gray-700 rounded-lg mt-4 shadow-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center cursor-pointer ",onClick:()=>{l(!s)},children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold dark:text-white",children:"SEO"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,r.jsxs)("div",{className:"px-3 py-1 rounded-md bg-blue-300 dark:bg-gray-800 text-3xl font-bold  ".concat(d()),children:[a.score,"/100"]}),(0,r.jsx)(o.J,{iconName:"arrow",className:"w-5 h-5 ".concat(s?"rotate-180":"")})]})]}),s&&(0,r.jsxs)("div",{className:"my-4",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold mb-2 dark:text-white",children:"Gợi \xfd SEO:"}),(0,r.jsx)("ul",{className:"list-disc pl-5 dark:text-gray-300",children:a.suggestions.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]})]})};var H=e=>{let{onChange:t,formData:a}=e;return(0,r.jsxs)("div",{className:"md:w-3/4 p-3",children:[(0,r.jsx)("input",{className:"rounded-md w-full text-2xl font-bold mb-2 p-3 border-b-2 border-gray-300 dark:border-gray-600 focus:outline-none focus:border-blue-500 dark:bg-gray-700 dark:text-white transition duration-300",type:"text",placeholder:"Th\xeam ti\xeau đề",name:"title",value:a.title,onChange:e=>{t({target:{name:"title",value:e.target.value}})},required:!0}),(0,r.jsx)("div",{className:"mb-6 flex items-center",children:a.id?(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.link||"Chưa c\xf3 link b\xe0i viết"}):null}),(0,r.jsx)(O,{content:a.content,onChange:e=>t({target:{name:"content",value:e}}),placeholder:"Viết nội dung b\xe0i viết của bạn ở đ\xe2y...",theme:"snow"}),(0,r.jsx)(L,{formData:a})]})},R=e=>{let{categories:t,post:a,onClick:n}=e,s={title:"",content:"",category:[],link:"",author:"",cover:"",subtitle:"",status:"DRAFT",published:"",updated:"",id:"",keywords:[]},[l,i]=(0,u.useState)(s);(0,u.useEffect)(()=>{a?i({...s,...a}):i(s)},[a]);let o=(0,u.useCallback)(e=>{let{target:{name:t,value:a}}=e;i(e=>({...e,[t]:a}))},[]);return(0,r.jsxs)("div",{className:"flex flex-col md:flex-row   overflow-hidden w-full h-full",children:[(0,r.jsx)(H,{onChange:o,formData:l}),(0,r.jsx)(A,{categories:t,onChange:o,formData:l,onClick:(e,t)=>{switch(t){case"cancel":n(e,t);break;case"submit":n(l,t)}}})]})},F=()=>{let{searchParams:e,setSearchParams:t,categories:a,lists:n,loading:s,post:l,handleClickPost:i}=k();return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)(d(),{children:(0,r.jsx)("title",{children:"Danh s\xe1ch b\xe0i viết"})}),(0,r.jsx)("div",{className:"p-4",children:(null==l?void 0:l.action)==="edit"?(0,r.jsx)(R,{categories:a,post:l,onClick:i}):(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)(N,{...e,onSearch:t,categories:a,onClick:i}),(0,r.jsx)(w,{...e,onSearch:t,loading:s,lists:n,onClick:i}),(0,r.jsx)(C,{post:l,onClick:i})]})}),s&&(0,r.jsx)(g,{message:"Đang xử l\xfd..."})]})};let J=(0,u.createContext)(),Y=()=>(0,u.useContext)(J),B=e=>{let{children:t}=e,[a,n]=(0,u.useState)({}),[s,l]=(0,u.useState)([]),[i,o]=(0,u.useState)(!0),[c,d]=(0,u.useState)({search:"",page:1,limit:10,status:"LIVE",total:0}),h=new y,g=(0,u.useCallback)(async()=>{try{console.log(c),o(!0);let{pages:e,total:t,nextPageToken:a}=await h.getPages(c);d(e=>({...e,total:t,nextPageToken:a})),l(e),console.log(e),o(!1)}catch(e){console.error("Error fetching pages:",e)}finally{o(!1)}},[c.limit,c.page,c.search,c.categorys,c.status]);(0,u.useEffect)(()=>{g()},[g]);let m=async(e,t)=>{switch(o(!0),t){case"edit":if(e.id){let a=await h.getPage(e.id);console.log(a),a.error?n({...e,action:t}):n({...a,action:t})}else n({...e,action:t});break;case"submit":(await h.createPage(h.createContent(e,a.status===e.status?"UPDATE":e.status))).error||(n({}),g());break;case"remove":case"trash":await h.deletePage(h.createContent(e),"trash"===t),n({}),g();break;case"cancel":n({});break;default:n({...e,action:t})}o(!1)};return(0,r.jsx)(J.Provider,{value:{searchParams:c,setSearchParams:d,lists:s,loading:i,page:a,handleClickPage:m},children:t})};var U=e=>{let{lists:t,loading:a,onClick:n,page:s,limit:l,nextPageToken:i,onSearch:c}=e;if(a)return null;let d={LIVE:{title:"Đ\xe3 xuất bản",className:"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100"},DRAFT:{title:"Bản nh\xe1p",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100"},SCHEDULED:{title:"Đ\xe3 l\xean lịch",className:"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-100"},SOFT_TRASHED:{title:"Th\xf9ng r\xe1c",className:"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100"}};return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full bg-white dark:bg-gray-800 shadow-md rounded-lg",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"STT"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Ti\xeau đề"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Ng\xe0y tạo"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Trạng th\xe1i"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"H\xe0nh động"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap dark:text-gray-300",children:(s-1)*l+t+1}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:f()(e.published).format("HH:mm:ss DD/MM/YYYY")})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"py-1.5 px-3 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(d[e.status].className),children:d[e.status].title})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsxs)("button",{className:"text-blue-600 hover:text-blue-900 mr-3 flex items-center dark:text-blue-400 dark:hover:text-blue-300",onClick:()=>window.open(e.link,"_blank"),children:[(0,r.jsx)(o.J,{iconName:"eye",className:"w-4 h-4 mr-1"}),"Xem"]}),(0,r.jsxs)("button",{className:"text-indigo-600 hover:text-indigo-900 mr-3 flex items-center dark:text-indigo-400 dark:hover:text-indigo-300",onClick:()=>n(e,"edit"),children:[(0,r.jsx)(o.J,{iconName:"edit",className:"w-4 h-4 mr-1"}),"Sửa"]}),(0,r.jsxs)("button",{className:"text-red-600 hover:text-red-900 flex items-center dark:text-red-400 dark:hover:text-red-300",onClick:()=>n(e,"delete"),children:[(0,r.jsx)(o.J,{iconName:"trash",className:"w-4 h-4 mr-1"}),"X\xf3a"]})]})]},e.id))})]})}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2 dark:text-white",children:"Số b\xe0i viết tr\xean trang:"}),(0,r.jsx)("select",{value:l,onChange:e=>c(t=>({...t,limit:Number(e.target.value),page:1})),className:"border rounded px-2 py-1 dark:bg-gray-700 dark:text-white dark:border-gray-600",children:[5,10,20,50,100].map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsx)("button",{onClick:()=>c(e=>({...e,page:e.page+1})),disabled:!i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:"Trang tiếp"})})]})]})},V=e=>{var t;let a,{onSearch:n,search:s,onClick:l,status:i}=e,[c,d]=(0,u.useState)(s),h=(0,u.useCallback)((t=e=>{n(t=>({...t,search:e,page:1}))},function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];clearTimeout(a),a=setTimeout(()=>t(...r),300)}),[n]);return(0,u.useEffect)(()=>{h(c)},[c,h]),(0,r.jsxs)(u.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-6 flex flex-wrap items-center gap-2 justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold  dark:text-white",children:"Danh s\xe1ch trang"}),(0,r.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full  transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 dark:bg-blue-500 dark:hover:bg-blue-600",onClick:()=>l({status:"LIVE"},"edit"),children:[(0,r.jsx)(o.J,{iconName:"plus",className:"w-5 h-5 mr-2 inline-block"}),"Tạo trang mới"]})]}),(0,r.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative w-full sm:w-2/3 ",children:[(0,r.jsx)("input",{type:"text",placeholder:"T\xecm kiếm trang...",className:"w-full border-2 border-gray-300 rounded-full py-2 px-3 pl-12 text-lg focus:outline-none focus:border-blue-500 transition duration-300 ease-in-out dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:focus:border-blue-400",value:c,onChange:e=>d(e.target.value),disabled:"LIVE"!==i}),(0,r.jsx)(o.J,{iconName:"search",className:"absolute left-4 top-3.5 w-6 h-6 text-gray-400 dark:text-gray-300"})]}),(0,r.jsxs)("select",{value:i,onChange:e=>n(t=>({...t,status:e.target.value,page:1})),className:"w-full sm:w-auto border-2 border-gray-300 rounded-lg py-2 px-2 bg-white text-lg focus:outline-none focus:border-blue-500 transition duration-300 ease-in-out dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:focus:border-blue-400",children:[(0,r.jsx)("option",{value:"ALL",children:"Tất cả"}),(0,r.jsx)("option",{value:"LIVE",children:"Đ\xe3 xuất bản"}),(0,r.jsx)("option",{value:"DRAFT",children:"Bản nh\xe1p"}),(0,r.jsx)("option",{value:"SOFT_TRASHED",children:"Th\xf9ng r\xe1c"})]})]})]})},G=e=>{let{page:t,onClick:a}=e,n="delete"===t.action;return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300 ease-in-out z-40 ".concat(n?"opacity-100":"opacity-0 pointer-events-none")}),(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 transition-all duration-300 ease-in-out ".concat(n?"opacity-100":"opacity-0 pointer-events-none"),children:(0,r.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full shadow-lg dark:bg-gray-800 transition-all duration-300 ease-in-out transform ".concat(n?"scale-100":"scale-95"),children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(o.J,{iconName:"alertTriangle",className:"mx-auto text-red-500 w-16 h-16 mb-4"}),(0,r.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-800 dark:text-gray-200",children:"X\xe1c nhận x\xf3a b\xe0i viết"}),(0,r.jsx)("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"Bạn c\xf3 chắc chắn muốn x\xf3a b\xe0i viết n\xe0y?"}),(0,r.jsx)("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded mb-4",children:(0,r.jsx)("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:t.title})}),(0,r.jsxs)("div",{className:"flex  gap-2",children:[(0,r.jsx)("button",{onClick:()=>a(t,"remove"),className:"w-full text-white bg-red-600 hover:bg-red-700 font-medium rounded-lg text-sm px-5 py-2.5 transition-colors duration-200",children:"X\xf3a vĩnh viễn"}),(0,r.jsx)("button",{onClick:()=>a(t,"trash"),className:"w-full text-white bg-yellow-600 hover:bg-yellow-700 font-medium rounded-lg text-sm px-5 py-2.5 transition-colors duration-200",children:"Chuyển th\xe0nh bản nh\xe1p"}),(0,r.jsx)("button",{onClick:()=>a(t,"cancel"),className:"w-full text-gray-500 bg-white hover:bg-gray-100 font-medium rounded-lg border border-gray-200 text-sm px-5 py-2.5 transition-colors duration-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600",children:"Hủy"})]})]})})})]})};let X=e=>{let{formData:t,onClick:a,onChange:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 dark:text-white",children:"Xuất bản"}),(0,r.jsxs)("select",{className:"w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:border-blue-500 transition duration-300",name:"status",value:t.status,onChange:n,children:[(0,r.jsx)("option",{value:"DRAFT",children:"Bản nh\xe1p"}),(0,r.jsx)("option",{value:"LIVE",children:"Xuất bản"})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300",type:"submit",onClick:()=>a({},"submit"),children:"Đăng"}),(0,r.jsx)("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-6 rounded-lg transition duration-300",type:"button",onClick:()=>a({},"cancel"),children:"Hủy"})]})]})},q=e=>{let{formData:t,onChange:a}=e,[n,s]=(0,u.useState)(!1),i=(0,u.useCallback)(async e=>{let t=e.target.files[0];if(t){s(!0);try{let e=await (0,l.gN)(t);if(!e)throw Error("Kh\xf4ng thể tải l\xean h\xecnh ảnh");a({target:{name:"cover",value:e}})}catch(r){console.error("Error uploading image:",r);let e=new FileReader;e.onload=()=>{a({target:{name:"cover",value:e.result}})},e.readAsDataURL(t)}finally{s(!1)}}},[a]);return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 dark:text-white",children:"Ảnh đại diện"}),(0,r.jsxs)("div",{className:"cursor-pointer relative overflow-hidden rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 group",onClick:()=>!n&&document.getElementById("coverImageUpload").click(),children:[(0,r.jsx)("img",{src:t.cover||m.default.coverEmpty,alt:"Ảnh đại diện",className:"w-full h-auto object-cover transition-transform duration-300 group-hover:scale-105"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:n?(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"}):(0,r.jsx)("span",{className:"text-white text-lg font-bold px-4 py-2 bg-blue-500 rounded-full transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:"Thay đổi ảnh"})})]}),(0,r.jsx)("input",{id:"coverImageUpload",type:"file",name:"cover",onChange:i,className:"hidden",accept:"image/*",disabled:n})]})},z=e=>{let{formData:t,onChange:a}=e,[n,s]=(0,u.useState)(t.subtitle||""),l=(0,u.useRef)(null);return(0,u.useEffect)(()=>{s(t.subtitle||"")},[t.subtitle]),(0,u.useEffect)(()=>()=>{l.current&&clearTimeout(l.current)},[]),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold dark:text-white",children:"M\xf4 tả ngắn"}),(0,r.jsx)("textarea",{name:"subtitle",value:n,onChange:e=>{let t=e.target.value;s(t),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{a({target:{name:"subtitle",value:t}})},300)},rows:3,placeholder:"Nhập m\xf4 tả ngắn b\xe0i viết...",className:"text-justify w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:border-blue-500 transition duration-300"})]})},W=e=>{var t;let{formData:a,onChange:n}=e,[s,l]=(0,u.useState)(""),i=(0,u.useCallback)((e,t)=>{n({target:{name:"keywords",value:t?a.keywords.filter(t=>t!==e):[...new Set([...a.keywords,e])]}})},[a.keywords,n]),o=(0,u.useCallback)(()=>{let e=s.split(",").map(e=>e.trim()).filter(e=>""!==e);n({target:{name:"keywords",value:[...new Set([...a.keywords,...e])]}}),l("")},[s,a.keywords,n]);return(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 dark:text-white",children:"Từ kh\xf3a"}),(0,r.jsx)("div",{className:"flex flex-wrap mb-2",children:null===(t=a.keywords)||void 0===t?void 0:t.map(e=>(0,r.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium mr-2 mb-2 px-2.5 py-1 rounded dark:bg-blue-900 dark:text-blue-300",children:[e,(0,r.jsx)("button",{onClick:()=>i(e,!0),className:"ml-2 text-xs",children:"\xd7"})]},e))}),(0,r.jsx)("input",{type:"text",name:"keywords",value:s,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&o(),className:"w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:border-blue-500 transition duration-300",placeholder:"Nhập từ kh\xf3a (mỗi từ c\xe1ch nhau bằng dấu phẩy)"})]})};var K=e=>{let{formData:t,onClick:a,onChange:n,categories:s}=e;return(0,r.jsxs)("div",{className:"md:w-1/4 p-3 bg-gray-50 dark:bg-gray-900 border-r border-gray-300 dark:border-gray-700 flex flex-col gap-4",children:[(0,r.jsx)(X,{formData:t,onClick:a,onChange:n}),(0,r.jsx)(q,{formData:t,onChange:n}),(0,r.jsx)(z,{formData:t,onChange:n}),(0,r.jsx)(W,{formData:t,onChange:n})]})};let $=M()(()=>Promise.all([a.e(608),a.e(762),a.e(325),a.e(578)]).then(a.bind(a,3578)),{loadableGenerated:{webpack:()=>[3578]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"flex items-center justify-center h-28 w-full",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-solid shadow-lg"})})}),Q=e=>{let{formData:t}=e,[a,n]=(0,u.useState)({score:0,suggestions:[]}),[s,l]=(0,u.useState)(!0),i=(0,u.useMemo)(()=>[{condition:e=>e.length>=50&&e.length<=60,score:15,suggestion:e=>"Ti\xeau đề n\xean c\xf3 độ d\xe0i từ 50 đến 60 k\xfd tự. Hiện tại: ".concat(e.length," k\xfd tự.")},{condition:e=>e.replace(/<[^>]*>/g,"").length>=1500,score:15,suggestion:e=>"Nội dung b\xe0i viết n\xean c\xf3 \xedt nhất 1500 k\xfd tự. Hiện tại: ".concat(e.replace(/<[^>]*>/g,"").length," k\xfd tự.")},{condition:e=>e.length>=140&&e.length<=160,score:15,suggestion:e=>"M\xf4 tả SEO n\xean c\xf3 độ d\xe0i từ 140 đến 160 k\xfd tự. Hiện tại: ".concat(e.length," k\xfd tự.")},{condition:e=>(null==e?void 0:e.length)>=3&&(null==e?void 0:e.length)<=5,score:15,suggestion:e=>"N\xean c\xf3 từ 3 đến 5 từ kh\xf3a SEO. Hiện tại: ".concat(null==e?void 0:e.length," từ kh\xf3a.")},{condition:e=>e,score:10,suggestion:()=>"N\xean th\xeam ảnh đại diện cho b\xe0i viết."},{condition:e=>(null==e?void 0:e.length)>=3&&(null==e?void 0:e.length)<=8,score:5,suggestion:()=>"N\xean th\xeam từ 3 đến 8 thẻ cho b\xe0i viết."},{condition:e=>e.length>=120&&e.length<=160,score:5,suggestion:()=>"N\xean th\xeam tr\xedch đoạn cho b\xe0i viết với độ d\xe0i từ 120 đến 160 k\xfd tự."}],[]),c=(0,u.useCallback)(()=>{let e=[],a=0,{title:r,content:s,link:l,subtitle:i,keywords:o=[]}=t;[{condition:r.length>=50&&r.length<=60,score:15,suggestion:"Ti\xeau đề n\xean c\xf3 độ d\xe0i từ 50 đến 60 k\xfd tự. Hiện tại: ".concat(r.length," k\xfd tự.")},{condition:s.replace(/<[^>]*>/g,"").length>=1500,score:15,suggestion:"Nội dung b\xe0i viết n\xean c\xf3 \xedt nhất 1500 k\xfd tự. Hiện tại: ".concat(s.replace(/<[^>]*>/g,"").length," k\xfd tự.")},{condition:i.length>=140&&i.length<=160,score:15,suggestion:"M\xf4 tả SEO n\xean c\xf3 độ d\xe0i từ 140 đến 160 k\xfd tự. Hiện tại: ".concat(i.length," k\xfd tự.")},{condition:(null==o?void 0:o.length)>=3&&(null==o?void 0:o.length)<=5,score:15,suggestion:"N\xean c\xf3 từ 3 đến 5 từ kh\xf3a SEO. Hiện tại: ".concat(null==o?void 0:o.length," từ kh\xf3a.")},{condition:t.cover,score:10,suggestion:"N\xean th\xeam ảnh đại diện cho b\xe0i viết."},{condition:(null==o?void 0:o.length)>=3&&(null==o?void 0:o.length)<=8,score:5,suggestion:"N\xean th\xeam từ 3 đến 8 thẻ cho b\xe0i viết."},{condition:i.length>=120&&i.length<=160,score:5,suggestion:"N\xean th\xeam tr\xedch đoạn cho b\xe0i viết với độ d\xe0i từ 120 đến 160 k\xfd tự."}].forEach(t=>{let{condition:r,score:n,suggestion:s}=t;r?a+=n:e.push(s)});let c=s.match(/<h[1-6].*?>(.*?)<\/h[1-6]>/g)||[],d=c.filter(e=>e.startsWith("<h2")).length,u=c.filter(e=>e.startsWith("<h3")).length;if(d>0&&d<=5?a+=5:e.push("N\xean sử dụng từ 1 đến 5 thẻ H2 để ph\xe2n chia nội dung b\xe0i viết."),u>0?a+=5:e.push("N\xean sử dụng c\xe1c thẻ H3 để ph\xe2n chia c\xe1c phần nhỏ trong nội dung."),c.length>0&&(c.map(e=>e.match(/<h(\d)/)[1]).every((e,t,a)=>0===t||e>=a[t-1])?a+=5:e.push("Cấu tr\xfac heading n\xean theo thứ tự giảm dần (H2 > H3...).")),l){let t=l.split("-").length,r=l.length,n=0;t>=3&&t<=5?n+=5:t>5?n+=3:n+=1,r>=20&&r<=70?n+=5:r>70?n+=3:n+=1,a+=n,n<8&&e.push("Đường dẫn n\xean c\xf3 từ 3 đến 5 từ v\xe0 độ d\xe0i từ 20 đến 70 k\xfd tự. Hiện tại: ".concat(t," từ, ").concat(r," k\xfd tự."))}else e.push("N\xean th\xeam đường dẫn cho b\xe0i viết.");n({score:a,suggestions:e})},[t,i]);(0,u.useEffect)(()=>{c()},[c]);let d=(0,u.useCallback)(()=>a.score>=80?"text-green-500":a.score>=50?"text-yellow-500":"text-red-500",[a.score]);return(0,r.jsxs)("div",{className:"md:w-full p-4 bg-gray-100 dark:bg-gray-700 rounded-lg mt-4 shadow-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center cursor-pointer ",onClick:()=>{l(!s)},children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold dark:text-white",children:"SEO"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,r.jsxs)("div",{className:"px-3 py-1 rounded-md bg-blue-300 dark:bg-gray-800 text-3xl font-bold  ".concat(d()),children:[a.score,"/100"]}),(0,r.jsx)(o.J,{iconName:"arrow",className:"w-5 h-5 ".concat(s?"rotate-180":"")})]})]}),s&&(0,r.jsxs)("div",{className:"my-4",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold mb-2 dark:text-white",children:"Gợi \xfd SEO:"}),(0,r.jsx)("ul",{className:"list-disc pl-5 dark:text-gray-300",children:a.suggestions.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]})]})};var Z=e=>{let{onChange:t,formData:a}=e;return(0,r.jsxs)("div",{className:"md:w-3/4 p-3",children:[(0,r.jsx)("input",{className:"rounded-md w-full text-2xl font-bold mb-2 p-3 border-b-2 border-gray-300 dark:border-gray-600 focus:outline-none focus:border-blue-500 dark:bg-gray-700 dark:text-white transition duration-300",type:"text",placeholder:"Th\xeam ti\xeau đề",name:"title",value:a.title,onChange:e=>{t({target:{name:"title",value:e.target.value}})},required:!0}),(0,r.jsx)("div",{className:"mb-6 flex items-center",children:a.id?(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.link||"Chưa c\xf3 link b\xe0i viết"}):null}),(0,r.jsx)($,{content:a.content,onChange:e=>t({target:{name:"content",value:e}}),placeholder:"Viết nội dung b\xe0i viết của bạn ở đ\xe2y...",theme:"snow"}),(0,r.jsx)(Q,{formData:a})]})},ee=e=>{let{page:t,onClick:a}=e,n={title:"",content:"",link:"",author:"",cover:"",subtitle:"",status:"DRAFT",published:"",updated:"",id:"",keywords:[]},[s,l]=(0,u.useState)(n);(0,u.useEffect)(()=>{t?l({...n,...t}):l(n)},[t]);let i=(0,u.useCallback)(e=>{let{target:{name:t,value:a}}=e;l(e=>({...e,[t]:a}))},[]);return(0,r.jsxs)("div",{className:"flex flex-col md:flex-row   overflow-hidden w-full h-full",children:[(0,r.jsx)(Z,{onChange:i,formData:s}),(0,r.jsx)(K,{onChange:i,formData:s,onClick:(e,t)=>{switch(t){case"cancel":a(e,t);break;case"submit":a(s,t)}}})]})},et=()=>{let{searchParams:e,setSearchParams:t,lists:a,loading:n,page:s,handleClickPage:l}=Y();return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)(d(),{children:(0,r.jsx)("title",{children:"Quản l\xfd trang"})}),(0,r.jsx)("div",{className:"p-4",children:(null==s?void 0:s.action)==="edit"?(0,r.jsx)(ee,{page:s,onClick:l}):(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)(V,{...e,onSearch:t,onClick:l}),(0,r.jsx)(U,{...e,onSearch:t,loading:n,lists:a,onClick:l}),(0,r.jsx)(G,{page:s,onClick:l})]})}),n&&(0,r.jsx)(g,{message:"Đang xử l\xfd..."})]})};let ea="https://sheets.googleapis.com/v4/spreadsheets",er=()=>localStorage.getItem(m.default.keyAccessToken),en=e=>"".concat(m.default.keySheetName).concat(e),es=async e=>{let t=en(e),[a]=await em(t);return a},el=async e=>{if(!e.ok)throw Error("Failed to ".concat(e.url.includes("batchUpdate")?"update":"fetch"," Google Sheet data"));return e.json()},ei=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=er();return el(await fetch(e,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},...t}))},eo=e=>ei("".concat(ea,"/").concat(e)),ec=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Trang t\xednh mới",{sheets:t=["CATEGORIES","POSTS","COMMENTS"],shareSettings:a={type:"anyone",role:"reader"}}=arguments.length>1?arguments[1]:void 0;try{let r=await ei(ea,{method:"POST",body:JSON.stringify({properties:{title:e},sheets:t.map(e=>({properties:{title:e}}))})}),n=r.spreadsheetId;return await ei("https://www.googleapis.com/drive/v3/files/".concat(n,"/permissions"),{method:"POST",body:JSON.stringify(a)}),r}catch(e){throw console.error("Error creating Google Sheet:",e),e}},ed=(e,t)=>ei("".concat(ea,"/").concat(e,"/values/A1:append?valueInputOption=RAW"),{method:"POST",body:JSON.stringify({values:[[JSON.stringify(t)]]})}),eu=(e,t,a)=>ei("".concat(ea,"/").concat(e,"/values/A").concat(t,"?valueInputOption=RAW"),{method:"PUT",body:JSON.stringify({values:[[JSON.stringify(a)]]})}),eh=async(e,t,a)=>{try{let r=(await eo(e)).sheets.find(e=>e.properties.sheetId===a);if(!r)throw Error("Sheet with id ".concat(a," not found"));return ei("".concat(ea,"/").concat(e,":batchUpdate"),{method:"POST",body:JSON.stringify({requests:[{deleteDimension:{range:{sheetId:r.properties.sheetId,dimension:"ROWS",startIndex:t-1,endIndex:t}}}]})})}catch(e){throw console.error("Error deleting data:",e),e}},eg=e=>ei("".concat(ea,"/").concat(e,"/values/A:A")),em=async e=>{try{console.log("name",e);let t=await ei("https://www.googleapis.com/drive/v3/files?".concat(new URLSearchParams({q:"mimeType='application/vnd.google-apps.spreadsheet' and name contains '".concat(e,"'"),fields:"files(id, name, parents)"}).toString()),{method:"GET"});if(console.log("response",t),t.files&&t.files.length>0)return t.files;return[]}catch(e){return[]}},ex=()=>(0,r.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-700",children:(0,r.jsx)("tr",{children:["STT","T\xean danh mục","M\xf4 tả","Danh mục con","Thao t\xe1c"].map(e=>(0,r.jsx)("th",{className:"py-3 px-4 text-left text-gray-700 dark:text-gray-300",children:e},e))})}),eb=e=>{let{category:t,index:a,currentPage:n,itemsPerPage:s,handleEditClick:l,handleDeleteClick:i}=e;return(0,r.jsxs)("tr",{className:a%2==0?"bg-gray-50 dark:bg-gray-900":"bg-white dark:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4 text-gray-800 dark:text-gray-300",children:(n-1)*s+a+1}),(0,r.jsx)("td",{className:"py-3 px-4 text-gray-800 dark:text-gray-300",children:t.name}),(0,r.jsx)("td",{className:"py-3 px-4 text-gray-800 dark:text-gray-300",children:t.description}),(0,r.jsx)("td",{className:"py-3 px-4 text-gray-800 dark:text-gray-300",children:t.selectedCategories.join(", ")}),(0,r.jsxs)("td",{className:"py-3 px-4 text-center",children:[(0,r.jsx)(ep,{onClick:()=>l(t),icon:"edit",color:"blue"}),(0,r.jsx)(ep,{onClick:()=>i(t),icon:"trash",color:"red"})]})]})},ep=e=>{let{onClick:t,icon:a,color:n}=e;return(0,r.jsx)("button",{className:"mr-2 text-".concat(n,"-500 hover:text-").concat(n,"-700 transition duration-300 focus:outline-none dark:text-").concat(n,"-400 dark:hover:text-").concat(n,"-300"),onClick:t,children:(0,r.jsx)(o.J,{iconName:a})})},ef=e=>{let{itemsPerPage:t,handleItemsPerPageChange:a}=e;return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("label",{htmlFor:"itemsPerPage",className:"mr-2 text-gray-700 dark:text-gray-300 font-medium",children:"Hiển thị:"}),(0,r.jsx)("select",{id:"itemsPerPage",value:t,onChange:a,className:"border border-gray-300 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 appearance-none cursor-pointer",children:[5,10,20,50].map(e=>(0,r.jsxs)("option",{value:e,children:[e," mục"]},e))}),(0,r.jsx)(o.J,{iconName:"chevronDown",className:"w-5 h-5 ml-2 text-gray-500 pointer-events-none"})]})},ey=e=>{let{onClick:t,disabled:a,icon:n,rotate:s}=e;return(0,r.jsx)("button",{onClick:t,className:"p-2 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 transition duration-300 focus:outline-none focus:ring-2 focus:ring-blue-400 ".concat(a?"opacity-50 cursor-not-allowed":""," dark:bg-blue-900 dark:text-blue-300 dark:hover:bg-blue-800"),disabled:a,children:(0,r.jsx)(o.J,{iconName:n,className:"w-5 h-5 ".concat(s)})})},ev=e=>{let{number:t,currentPage:a,onClick:n}=e;return(0,r.jsx)("button",{onClick:n,className:"w-10 h-10 flex items-center justify-center rounded-full ".concat(a===t?"bg-blue-500 text-white dark:bg-blue-600":"text-gray-700 hover:bg-blue-100 dark:text-gray-300 dark:hover:bg-blue-900"," transition duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500"),children:t})};var ek=e=>{let{currentCategories:t,currentPage:a,itemsPerPage:n,paginate:s,handleEditClick:l,handleDeleteClick:i,handleItemsPerPageChange:o,filteredCategories:c}=e;return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full bg-white rounded-lg overflow-hidden dark:bg-gray-800",children:[(0,r.jsx)(ex,{}),(0,r.jsx)("tbody",{children:t.map((e,t)=>(0,r.jsx)(eb,{category:e,index:t,currentPage:a,itemsPerPage:n,handleEditClick:l,handleDeleteClick:i},e.id))})]})}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,r.jsx)(ef,{itemsPerPage:n,handleItemsPerPageChange:o}),(()=>{let e=Math.ceil(c.length/n),t=Math.max(1,a-Math.floor(1.5)),l=Math.min(e,t+3-1);return l-t+1<3&&(t=Math.max(1,l-3+1)),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)(ey,{onClick:()=>s(1),disabled:1===a,icon:"arrow",rotate:"rotate-90"}),(0,r.jsx)("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-full shadow-sm",children:Array.from({length:l-t+1},(e,a)=>t+a).map(e=>(0,r.jsx)(ev,{number:e,currentPage:a,onClick:()=>s(e)},e))}),(0,r.jsx)(ey,{onClick:()=>s(e),disabled:a===e,icon:"arrow",rotate:"-rotate-90"})]})})()]})]})},ej=e=>{let{category:t,handleDeleteCancel:a,handleDeleteConfirm:n,isOpen:s,loading:l}=e;return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300 ease-in-out z-40 ".concat(s?"opacity-100":"opacity-0 pointer-events-none")}),(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 transition-all duration-300 ease-in-out ".concat(s?"opacity-100":"opacity-0 pointer-events-none"),children:(0,r.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full shadow-lg dark:bg-gray-800 transition-all duration-300 ease-in-out transform ".concat(s?"scale-100":"scale-95"),children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(o.J,{iconName:"alertTriangle",className:"mx-auto text-red-500 w-16 h-16 mb-4"}),(0,r.jsx)("h3",{className:"mb-2 text-xl font-bold text-gray-800 dark:text-gray-200",children:"X\xe1c nhận x\xf3a danh mục"}),(0,r.jsx)("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"Bạn c\xf3 chắc chắn muốn x\xf3a danh mục n\xe0y?"}),(0,r.jsx)("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded mb-4",children:(0,r.jsx)("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:null==t?void 0:t.name})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:n,className:"w-full text-white bg-red-600 hover:bg-red-700 font-medium rounded-lg text-sm px-5 py-2.5 transition-colors duration-200 flex items-center justify-center",disabled:l,children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.J,{iconName:"loader",className:"animate-spin mr-2"}),"Đang x\xf3a..."]}):"X\xf3a"}),(0,r.jsx)("button",{onClick:a,className:"w-full text-gray-500 bg-white hover:bg-gray-100 font-medium rounded-lg border border-gray-200 text-sm px-5 py-2.5 transition-colors duration-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600",disabled:l,children:"Hủy"})]})]})})})]})},ew=e=>{let{isOpen:t,category:a,onClick:n,categories:s=[]}=e,[l,i]=(0,u.useState)({title:"",key:"",description:"",cover:m.default.coverDefault});return(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300 ease-in-out z-40 ".concat(t?"opacity-100":"opacity-0 pointer-events-none")}),(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 transition-all duration-300 ease-in-out ".concat(t?"opacity-100":"opacity-0 pointer-events-none"),children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full shadow-lg dark:bg-gray-800 transition-all duration-300 ease-in-out transform ".concat(t?"scale-100":"scale-95"),children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800 dark:text-gray-200",children:a?"Chỉnh sửa danh mục":"Th\xeam danh mục mới"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2 dark:text-gray-300",htmlFor:"title",children:"Ti\xeau đề"}),(0,r.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-600 dark:text-white dark:border-gray-500",id:"title",type:"text",name:"title",value:l.title,onChange:e=>{let{name:t,value:a}=e.target;i(e=>({...e,[t]:a}))}})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2 dark:text-gray-300",htmlFor:"categories",children:"Danh mục"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"flex flex-wrap mt-2"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-600 dark:text-white dark:border-gray-500",placeholder:"T\xecm kiếm danh mục..."})})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{className:"w-full text-white bg-blue-600 hover:bg-blue-700 font-medium rounded-lg text-sm px-5 py-2.5 transition-colors duration-200 flex items-center justify-center",children:"Lưu"}),(0,r.jsx)("button",{onClick:()=>n("cancel"),className:"w-full text-gray-500 bg-white hover:bg-gray-100 font-medium rounded-lg border border-gray-200 text-sm px-5 py-2.5 transition-colors duration-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600",children:"Hủy"})]})]})})]})},eN=()=>{let[e,t]=(0,u.useState)([]),[a,n]=(0,u.useState)(null),[s,l]=(0,u.useState)(!0),[i,c]=(0,u.useState)(null),[d,g]=(0,u.useState)(1),[x,p]=(0,u.useState)(10),[f,y]=(0,u.useState)(!1),[v,k]=(0,u.useState)(null),[j,w]=(0,u.useState)(!1),[N,C]=(0,u.useState)(null),[T,S]=(0,u.useState)([]),[E,_]=(0,u.useState)({name:"",description:"",selectedCategories:[],coverImage:""}),[D,P]=(0,u.useState)(""),A=(0,h.XJ)(),I="".concat(m.default.keySheetName).concat(A),M=(0,u.useCallback)(async e=>{try{let a=await eg(e);a.values&&t(a.values.filter(e=>e.length>0).map((e,t)=>{let a=JSON.parse(e[0]);return{...a,selectedCategories:a.selectedCategories||[],coverImage:a.coverImage||"",rowIndex:t+1}}))}catch(e){console.error(e),c("Error fetching categories")}},[]);(0,u.useEffect)(()=>{(async()=>{try{let e=await (0,b.pE)();S(e)}catch(e){console.error("Error fetching categories:",e),c("Đ\xe3 xảy ra lỗi khi tải danh mục. Vui l\xf2ng thử lại sau.")}finally{l(!1)}})()},[]);let O=(0,u.useCallback)(async()=>{try{let e=await es(A);if(e){let t=await eo(e.id);n({...e,sheets:t.sheets}),await M(e.id)}}catch(e){c("Error fetching sheet info")}finally{l(!1)}},[A,M]);(0,u.useEffect)(()=>{O()},[O]);let L=async()=>{try{l(!0);let e=await ec(I,{sheets:["CATEGORIES","POSTS","COMMENTS"],shareSettings:{type:"anyone",role:"reader"}}),t=await eo(e.spreadsheetId);n({name:e.properties.title,id:e.spreadsheetId,sheets:t.sheets}),await M(e.spreadsheetId)}catch(e){c("Error creating new sheet")}finally{l(!1)}},H=(0,u.useCallback)(e=>{k(e),y(!0)},[]),R=(0,u.useCallback)(async()=>{if(v&&a)try{l(!0);let e=a.sheets.find(e=>"CATEGORIES"===e.properties.title);if(!e)throw Error("CATEGORIES sheet not found");await eh(a.id,v.rowIndex,e.properties.sheetId),await M(a.id),y(!1),k(null)}catch(e){console.error("Error deleting category:",e),c("Error deleting category: "+e.message)}finally{l(!1)}},[v,a,M]),F=(0,u.useCallback)(()=>{y(!1),k(null)},[]),J=(0,u.useCallback)(()=>{C(null),_({name:"",description:"",selectedCategories:[],coverImage:""}),w(!0)},[]),Y=(0,u.useCallback)(e=>{C(e),_({name:e.name,description:e.description,selectedCategories:e.selectedCategories||[],coverImage:e.coverImage||""}),w(!0)},[]);(0,u.useCallback)(async e=>{if(e.preventDefault(),a)try{if(!a.sheets.find(e=>"CATEGORIES"===e.properties.title))throw Error("CATEGORIES sheet not found");N?await eu(a.id,N.rowIndex,{...N,...E}):await ed(a.id,E),await M(a.id),w(!1),_({name:"",description:"",selectedCategories:[],coverImage:""}),C(null)}catch(e){console.error("Error saving category:",e),c("Error saving category: "+e.message)}},[a,N,E,M]),(0,u.useCallback)(()=>{w(!1),_({name:"",description:"",selectedCategories:[],coverImage:""}),C(null)},[]);let B=(0,u.useCallback)(e=>{P(e.target.value),g(1)},[]),U=(0,u.useCallback)(e=>{p(Number(e.target.value)),g(1)},[]),V=(0,u.useMemo)(()=>e.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())||e.description.toLowerCase().includes(D.toLowerCase())),[e,D]),G=(0,u.useMemo)(()=>{let e=d*x,t=e-x;return V.slice(t,e)},[V,d,x]),X=(0,u.useCallback)(e=>g(e),[]),q=(0,u.useCallback)((e,t)=>{console.log(e,t)},[]);return i?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 my-4 rounded-lg shadow-md dark:bg-red-900 dark:border-red-700 dark:text-red-300",role:"alert",children:[(0,r.jsx)("p",{className:"font-bold",children:"Lỗi"}),(0,r.jsx)("p",{children:i})]})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 dark:bg-gray-900",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-8 text-gray-800 dark:text-gray-200",children:"Quản l\xfd danh mục"}),s?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(o.J,{iconName:"loader",className:"w-10 h-10 animate-spin text-blue-500 dark:text-blue-400"})}):a?(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg dark:bg-gray-800",children:[(0,r.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative flex-grow",children:[(0,r.jsx)("input",{type:"text",placeholder:"T\xecm kiếm danh mục...",className:"w-full border-2 border-gray-300 rounded-full py-2 px-3 pl-12 text-lg focus:outline-none focus:border-blue-500 transition duration-300 ease-in-out dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:focus:border-blue-400",value:D,onChange:B}),(0,r.jsx)(o.J,{iconName:"search",className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-gray-400 dark:text-gray-300"})]}),(0,r.jsxs)("button",{className:"whitespace-nowrap bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 dark:bg-blue-500 dark:hover:bg-blue-600",onClick:J,children:[(0,r.jsx)(o.J,{iconName:"plus",className:"inline-block mr-2"}),"Th\xeam danh mục mới"]})]}),0===V.length?(0,r.jsx)("p",{className:"text-gray-600 text-center py-4 dark:text-gray-400",children:"Kh\xf4ng t\xecm thấy danh mục n\xe0o."}):(0,r.jsx)(ek,{currentCategories:G,currentPage:d,itemsPerPage:x,paginate:X,handleEditClick:Y,handleDeleteClick:H,handleItemsPerPageChange:U,filteredCategories:V})]}):(0,r.jsxs)("div",{className:"text-center bg-white p-8 rounded-lg shadow-lg dark:bg-gray-800",children:[(0,r.jsx)("p",{className:"mb-6 text-xl text-gray-600 dark:text-gray-300",children:"Chưa c\xf3 Google Sheet cho blog n\xe0y."}),(0,r.jsx)("button",{onClick:L,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 dark:bg-blue-600 dark:hover:bg-blue-700",children:"Tạo Google Sheet mới"})]}),(0,r.jsx)(ej,{category:v,handleDeleteCancel:F,handleDeleteConfirm:R,isOpen:f,loading:s}),(0,r.jsx)(ew,{isOpen:j,onClick:q})]})};let eC=(0,u.createContext)(),eT=()=>(0,u.useContext)(eC),eS=e=>{let{children:t}=e,[a,n]=(0,u.useState)(null),[s,l]=(0,u.useState)(!0),[i,o]=(0,u.useState)(null),c=(0,u.useCallback)(()=>{localStorage.removeItem(m.default.keyAccessToken),localStorage.removeItem(m.default.keyBlogCurrent),n(null),window.location.href=m.default.pageLogin},[]);return(0,u.useEffect)(()=>{(async()=>{if(!(0,h.jl)()){c();return}try{let e=await (0,h.bG)();if(!e){c();return}n(e);let t=(0,h.XJ)(),a=await (0,h.De)();o(a.map((e,a)=>({id:e.id,name:e.name,url:e.url,current:t?e.id===t:0===a}))),!t&&a.length>0&&localStorage.setItem(m.default.keyBlogCurrent,JSON.stringify(a[0]))}catch(e){console.error("Error fetching user and blog data:",e)}finally{l(!1)}})()},[c]),(0,r.jsx)(eC.Provider,{value:{user:a,loading:s,logout:c,list:i,setLoading:l},children:t})};var eE=()=>{let[e,t]=(0,u.useState)({posts:0,pages:0,comments:0,views:0}),[a,n]=(0,u.useState)(!0),[s,l]=(0,u.useState)([]),{loading:i}=eT();(0,u.useEffect)(()=>{(async()=>{if(!i){n(!0);try{let e=(0,h.XJ)(),[a,r]=await Promise.all([(0,h.Fq)(e),(0,h.cq)(e,5)]);t(a),l(r)}catch(e){console.error("Error fetching dashboard data:",e)}finally{n(!1)}}})()},[i]);let c=(0,u.useMemo)(()=>[{title:"B\xe0i viết",count:e.posts,icon:"book"},{title:"Trang",count:e.pages,icon:"menu"},{title:"B\xecnh luận",count:e.comments,icon:"message"},{title:"Lượt xem",count:e.views,icon:"eye"}],[e]),g=e=>({post:"book",page:"menu",comment:"message"})[e]||"clock",m=e=>({post:'B\xe0i viết mới được đăng: "'.concat(e.title,'"'),page:'Trang mới được tạo: "'.concat(e.title,'"'),comment:'B\xecnh luận mới: "'.concat(e.content.slice(0,50),'..."')})[e.type]||"Hoạt động kh\xf4ng x\xe1c định",x=()=>(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(o.J,{iconName:"loader",className:"w-10 h-10 animate-spin text-blue-500 dark:text-blue-400"})});return(0,r.jsxs)("div",{className:"container mx-auto p-4 dark:bg-gray-800 dark:text-white",children:[(0,r.jsx)(d(),{children:(0,r.jsx)("title",{children:"Bảng điều khiển"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 dark:text-white",children:"Bảng điều khiển"}),a?x():(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(e=>{let{title:t,count:a,icon:n}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200",children:t}),(0,r.jsx)(o.J,{iconName:n,className:"w-8 h-8 text-blue-500 dark:text-blue-400"})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:parseInt(a).toLocaleString("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!0})})]},t)})}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Hoạt động gần đ\xe2y"}),a?x():(0,r.jsx)("ul",{className:"space-y-4",children:s.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center",children:[(0,r.jsx)(o.J,{iconName:g(e.type),className:"w-5 h-5 mr-3 text-gray-500 dark:text-gray-400"}),"post"===e.type||"page"===e.type?(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"dark:text-gray-200 hover:underline",children:m(e)}):(0,r.jsx)("span",{className:"dark:text-gray-200",children:m(e)})]},t))})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Thống k\xea nhanh"}),x()]})]})]})},e_=a(2881),eD=()=>{var e;let{theme:t,toggleTheme:a}=(0,e_.F)(),{user:n,list:s,loading:l,setLoading:i,logout:c}=eT(),[d,h]=(0,u.useState)({menu:!1,item:!1}),g=(0,u.useCallback)(async e=>{i(!0);try{let t=s.find(t=>t.id===e);t&&localStorage.setItem(m.default.keyBlogCurrent,JSON.stringify(t)),window.location.reload()}catch(e){console.error("Error changing blog:",e)}},[s,i]);return l?(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"})}):(0,r.jsx)("header",{className:"bg-white shadow-lg dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-end items-center gap-2",children:[(0,r.jsx)("button",{onClick:a,className:"focus:outline-none hover:bg-gray-200 p-2 rounded-full dark:hover:bg-gray-800 dark:text-white",children:(0,r.jsx)(o.J,{iconName:"light"===t?"moon":"sun"})}),(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("button",{onClick:()=>h(e=>({...e,menu:!e.menu})),className:"focus:outline-none hover:bg-gray-200 p-2 rounded-full dark:hover:bg-gray-800 dark:text-white",children:(null==n?void 0:n.picture)?(0,r.jsx)("img",{src:n.picture,alt:n.name,className:"w-7 h-7 rounded-full"}):(0,r.jsx)(o.J,{iconName:"user"})}),d.menu&&(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-80 bg-blue-50 dark:bg-gray-700 rounded-lg shadow-lg overflow-hidden z-[1200]",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-600",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold",children:null==n?void 0:null===(e=n.name)||void 0===e?void 0:e.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:null==n?void 0:n.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:null==n?void 0:n.email})]})]})}),(0,r.jsxs)("div",{className:"m-3",children:[(0,r.jsxs)("div",{className:"p-4 flex items-center justify-between bg-white dark:bg-gray-800 ".concat(d.item?"rounded-tl-[1.8rem] rounded-tr-[1.8rem]":"rounded-full"),children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:d.item?"Ẩn Blog":"Hiện th\xeam Blog"}),(0,r.jsx)("div",{onClick:()=>h(e=>({...e,item:!e.item})),children:(0,r.jsx)(o.J,{iconName:"arrow",className:"w-5 h-5 text-gray-500 dark:text-gray-400 cursor-pointer ".concat(d.item?"rotate-180":"")})})]}),d.item&&(0,r.jsxs)(u.Fragment,{children:[(0,r.jsx)("div",{className:"flex flex-col overflow-y-auto max-h-[300px] gap-0.5 mt-0.5",children:s.map(e=>(0,r.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center cursor-pointer justify-start bg-white dark:bg-gray-800",onClick:()=>g(e.id),children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-bold mr-3",children:e.name.charAt(0).toUpperCase()}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name})}),e.current&&(0,r.jsx)(o.J,{iconName:"discountCheck",className:"w-5 h-5 text-green-500"})]},e.id))}),(0,r.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center cursor-pointer my-0.5 bg-white dark:bg-gray-800",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold mr-3",children:(0,r.jsx)(o.J,{iconName:"plus"})}),(0,r.jsx)("a",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",href:"https://www.blogger.com/",target:"_blank",rel:"noopener noreferrer",children:"Th\xeam mới Blog"})]}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-bl-[1.8rem] rounded-br-[1.8rem]",children:(0,r.jsx)("button",{onClick:c,className:"w-full text-center text-red-700 dark:text-gray-300 p-2.5 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Đăng xuất"})})]})]})]})]})]})})};function eP(){let[e,t]=(0,u.useState)(null),[a,n]=(0,u.useState)(null),[s,l]=(0,u.useState)(!1),i=(0,h.XJ)(),o="BLOG-".concat(i);(0,u.useEffect)(()=>{!async function(){try{let e=await es(i);e&&t(e)}catch(e){n("Error fetching sheet info")}}()},[i]);let c=async()=>{try{l(!0);let e=await ec(o,{sheets:["CATEGORIES","POSTS","COMMENTS"],shareSettings:{type:"anyone",role:"reader"}});console.log(e),t({name:e.properties.title,id:e.spreadsheetId})}catch(e){n("Error creating new sheet")}finally{l(!1)}};return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"C\xe0i đặt"}),(0,r.jsxs)("div",{className:"w-full max-w-7xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-blue-500 text-white py-4 px-6",children:(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Th\xf4ng tin File Google Sheet"})}),(0,r.jsxs)("div",{className:"p-6",children:[a&&(0,r.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",role:"alert",children:(0,r.jsx)("p",{children:a})}),e?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"T\xean trang t\xednh:"}),(0,r.jsx)("span",{className:"w-2/3",children:e.name})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"ID trang t\xednh:"}),(0,r.jsx)("span",{className:"w-2/3",children:e.id})]}),(0,r.jsx)("a",{href:"https://docs.google.com/spreadsheets/d/".concat(e.id),target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition duration-300",children:"Mở trang t\xednh"})]}):(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"mb-4 text-gray-600",children:"Kh\xf4ng t\xecm thấy trang t\xednh n\xe0o cho blog n\xe0y."}),(0,r.jsx)("button",{onClick:c,disabled:s,className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded transition duration-300 ".concat(s?"opacity-50 cursor-not-allowed":""),children:s?"Đang tạo...":"Tạo trang t\xednh mới"})]})]})]})]})}var eA=e=>{let{isSidebarCollapsed:t,setIsSidebarCollapsed:a,activeTab:n,setActiveTab:s,navItems:l}=e,c=(0,i.useRouter)(),{theme:d}=(0,e_.F)(),g=(0,u.useCallback)(()=>{a(e=>!e)},[a]),x=(0,u.useCallback)(e=>{s(e),c.push("".concat(m.default.pageAdmin,"?page=").concat(e),void 0,{shallow:!0})},[c,s]);return(0,r.jsxs)("aside",{className:"bg-gray-800 dark:bg-gray-900 text-white transition-all duration-300 ".concat(t?"w-16":"w-64"," flex flex-col"),children:[(0,r.jsxs)("div",{className:"p-4 flex items-center ".concat(t?"justify-center":"justify-between"),children:[!t&&(0,r.jsx)("h2",{className:"font-bold text-blue-400 dark:text-blue-300 truncate",children:(0,h.LE)()}),(0,r.jsx)("button",{onClick:g,className:"text-white focus:outline-none hover:bg-gray-700 dark:hover:bg-gray-800 p-2 rounded-full transition-colors duration-200",children:(0,r.jsx)(o.J,{iconName:"arrow",className:"w-6 h-6 transform transition-transform duration-200 ".concat(t?"-rotate-90":"rotate-90")})})]}),(0,r.jsx)("nav",{className:"flex-grow",children:l.map(e=>{let{tab:a,icon:s,label:l}=e;return(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("button",{className:"flex items-center w-full p-4 hover:bg-gray-700 dark:hover:bg-gray-800 transition-colors duration-200 ".concat(n===a?"bg-gray-700 dark:bg-gray-800":""),onClick:()=>x(a),children:[(0,r.jsx)(o.J,{iconName:s,className:"w-5 h-5 ".concat(t?"mx-auto":"mr-3")}),!t&&(0,r.jsx)("span",{className:"truncate",children:l})]}),t&&(0,r.jsx)("div",{className:"absolute left-full top-1/2 transform -translate-y-1/2 ml-2 px-2 py-1 bg-gray-700 dark:bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap",children:l})]},a)})})]})},eI=()=>{let e=(0,i.useRouter)(),[t,a]=(0,u.useState)("dashboard"),[n,s]=(0,u.useState)(!1);(0,u.useEffect)(()=>{let{page:t}=e.query;t&&["dashboard","posts","pages","categories","settings"].includes(t)&&a(t)},[e.query]);let l=(0,u.useMemo)(()=>[{tab:"dashboard",icon:"layoutDashboard",label:"Bảng điều khiển"},{tab:"posts",icon:"book",label:"B\xe0i viết"},{tab:"pages",icon:"menu",label:"Trang"},{tab:"categories",icon:"tags",label:"Chuy\xean mục"},{tab:"settings",icon:"settings",label:"C\xe0i đặt"}],[]),o=(0,u.useCallback)(()=>({dashboard:(0,r.jsx)(eE,{}),posts:(0,r.jsx)(j,{children:(0,r.jsx)(F,{})}),pages:(0,r.jsx)(B,{children:(0,r.jsx)(et,{})}),categories:(0,r.jsx)(eN,{}),settings:(0,r.jsx)(eP,{})})[t]||null,[t]);return(0,r.jsx)(eS,{children:(0,r.jsxs)("div",{className:"flex h-screen ".concat(n?"overflow-x-auto":""),children:[(0,r.jsx)(eA,{isSidebarCollapsed:n,setIsSidebarCollapsed:s,activeTab:t,setActiveTab:a,navItems:l}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden bg-white dark:bg-gray-800 dark:text-white",children:[(0,r.jsx)(eD,{}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto bg-white dark:bg-gray-800 dark:text-white ",children:o()})]})]})})};function eM(){let{posts:e,loading:t}=(0,n.Z)(),a=e[0],{slug:o}=(0,i.useRouter)().query;return"login.html"===o?(0,r.jsx)(x,{}):"admin.html"===o?(0,r.jsx)(eI,{}):""===t?(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8 animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-300 rounded w-3/4 mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/2 mb-6"}),(0,r.jsx)("div",{className:"h-64 bg-gray-300 rounded mb-6"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded w-5/6"})]})]}):a?(0,r.jsxs)("article",{className:"max-w-3xl mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:a.title}),(0,r.jsxs)("div",{className:"mb-4 text-gray-600",children:[(0,r.jsxs)("span",{children:["Đăng bởi ",a.author," • "]}),(0,r.jsx)("time",{dateTime:a.published,children:(0,s.B)(a.published)})]}),a.cover&&(0,r.jsx)("img",{src:(0,l.Vh)(a.cover),alt:a.title,className:"w-full h-auto mb-6 rounded-lg"}),(0,r.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:a.content}})]}):(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Lỗi"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng t\xecm thấy trang hoặc nội dung kh\xf4ng hợp lệ. Vui l\xf2ng kiểm tra lại đường dẫn."})]})}},142:function(e,t,a){"use strict";a.d(t,{Vh:function(){return i},aJ:function(){return d},gN:function(){return o},hv:function(){return c}});var r=a(1752),n=a.n(r),s=a(8552);let{publicRuntimeConfig:l}=n()(),i=e=>/^(http|https):\/\//.test(e)?e:"".concat(null==l?void 0:l.assetPrefix).concat(e),o=async e=>{let t=new FormData;t.append("image",e);try{let e=await fetch("https://api.imgur.com/3/image",{method:"POST",body:t,headers:{Authorization:"Client-ID ".concat(s.default.imgurClientId)}});return(await e.json()).data.link}catch(e){return console.error("Error uploading image to Imgur:",e),null}},c=async e=>{try{let t=await fetch(e),a=await t.blob(),r=await new Promise((e,t)=>{let r=new FileReader;r.onloadend=()=>{let a=new Image;a.onload=()=>{let t=document.createElement("canvas"),r=t.getContext("2d");t.width=a.width,t.height=a.height,r.drawImage(a,0,0);let n=t.toDataURL("image/jpeg",.5);e(n)},a.onerror=()=>t(Error("Failed to load image")),a.src=r.result},r.readAsDataURL(a)});return console.log(r),r}catch(e){return console.error("Error compressing image:",e),null}},d=e=>e.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[đĐ]/g,e=>"đ"===e?"d":"D").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")},8481:function(e,t,a){"use strict";a.d(t,{B:function(){return i}});var r=a(7484),n=a.n(r),s=a(4110),l=a.n(s);a(7553),n().extend(l()),n().locale("vi");let i=e=>n()(e).fromNow()},5152:function(e,t,a){e.exports=a(8864)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5603)}),_N_E=e.O()}]);